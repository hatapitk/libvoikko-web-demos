<!DOCTYPE html>
<html lang="en">
<head>
<title>JS-libvoikko interactive demo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
<style type="text/css">
.voikkoCommand {
	color: red;
}
.voikkoResult {
	color: blue;
	padding-left: 2em;
}
</style>
</head>
<body class="container-fluid">
<div class="jumbotron">
<h1>JS-libvoikko interactive demo</h1>
<p>JS-libvoikko is a pure JavaScript port of libvoikko. It runs in latest versions of all major web browsers without plugins or server
side scripting. You can try the code samples below and edit them to see some of the possibilities.</p>
<p>See the <a href="https://www.puimula.org/htp/testing/voikko-sdk/java/javadoc/org/puimula/libvoikko/Voikko.html">API documentation</a> for more info.
Our JavaScript API follows the Java API as closely as reasonably possible but some differences remain.</p>
</div>
<div id="placeholder" class="alert alert-info" role="alert">Loading the Finnish dictionary...</div>

<div id="theForm" class="container-fluid hidden">

  <div class="row">
    <div class="col-md-4">
      <h2>Script to run</h2>
      <span class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
          Select sample code
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" id="sampleMenu" aria-labelledby="dropdownMenu1">
          <li><a href="#" data-code='v.spell("kissa");|v.spell("hevvonen");'>Spell checking - spell()</a></li>
          <li><a href="#" data-code='v.suggest("hevvonen");'>Spelling correction - suggest()</a></li>
          <li><a href="#" data-code='v.grammarErrors("Ullakolla on hiiri joka juoksee karkuun.", "fi");'>Grammar checking - grammarErrors()</a></li>
          <li role="separator" class="divider"></li>
          <li><a href="#" data-code='v.analyze("tulen");'>Morphological anlysis - analyze()</a></li>
          <li role="separator" class="divider"></li>
          <li><a href="#" data-code='v.hyphenate("yhteisomistus");'>Hyphenation - hyphenate()</a></li>
          <li role="separator" class="divider"></li>
          <li><a href="#" data-code='v.tokens("Kissa vai hevonen?");'>String tokenization - tokens()</a></li>
          <li><a href="#" data-code='v.sentences("Kissa vai ei? Vaikea sanoa.");'>Sentence splitting - sentences()</a></li>
        </ul>
      </span> (you can edit it afterwards)
      
      <pre>var v = libvoikko.init("fi");</pre>
      <pre id="theScript"></pre>
    </div>
    <div class="col-md-2">
      <button type="button" class="btn btn-default btn-lg" onclick="runScript()">
        <span class="glyphicon glyphicon-play" aria-hidden="true"></span> Run the script
      </button>
    </div>
    <div class="col-md-6">
      <h2>Output from the script</h2>
      <pre id="outputArea"></pre>
    </div>
  </div>

</div>

<div class="container-fluid">
<h2>Legal notices</h2>
<p>This demonstration page is written by Harri Pitk√§nen (hatapitk@iki.fi). It is made available under the terms of GNU General Public License, version 3 or later.</p>
<p>When JS-libvoikko is used in a web browser it is necessary to load compiled version of libvoikko, possible dependent libraries and required dictionaries
to the browser. Since these files are really transferred to the browser (not just run on the server as it has often been the case when libvoikko has been
used in the web context) the distribution terms of the relevant software licenses need to be followed. This demonstration uses libvoikko and voikko-fi
from <a href="https://github.com/voikko/corevoikko/tree/905e71fc3d94923df3a4b15a5be8834fe0045ddf">corevoikko revision 905e71fc3d94923df3a4b15a5be8834fe0045ddf</a>. Additionally <a href="https://kripken.github.io/emscripten-site/docs/getting_started/downloads.html">Emscripten 1.35.0</a>, <a href="https://code.jquery.com/jquery-2.2.1.js">jQuery 2.2.1</a> and <a href="https://getbootstrap.com/getting-started/">Bootstrap 3.3.6</a> are used. Source code to all of these
components is available at the linked web sites.</p>
</div>

<script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<script type="text/javascript" src="libvoikko.js"></script>
<script>

function setScript(script) {
	$("#theScript").text(script);
}

function runScript() {
	var script = $("#theScript").text();
	var commands = script.split(";");
	var output = $("#outputArea");
	output.empty();
	for (var i = 0; i < commands.length; i++) {
		var command = commands[i];
		var commandDiv = $("<div/>");
		commandDiv.addClass("voikkoCommand");
		commandDiv.text(command);
		output.append(commandDiv);
		var result = eval(command);
		if (typeof(result) == "object") {
			result = JSON.stringify(result, null, 2);
		}
		var resultDiv = $("<div/>");
		resultDiv.addClass("voikkoResult");
		resultDiv.text(result);
		output.append(resultDiv);
	}
}

var libvoikko = Libvoikko({
	onLoad : function() {
		$("#sampleMenu a").click(function() {
			var script = $(this).attr("data-code").replace("|", "\n");
			setScript(script);
			runScript();
		});
		$("#theScript").prop("contentEditable", true);
		$("#placeholder").addClass("hidden");
		$("#theForm").removeClass("hidden");
		v = libvoikko.init("fi");
		$("#sampleMenu a").first().trigger("click");
	}
});
</script>
</body>
</html>
